{"file":"/home/user/climbox/packages/api/src/time-series/time-series.entity.ts","mappings":";;;;;;;;;;;;AAAA,6CAA8C;AAC9C,qCASiB;AACjB,6EAAkE;AAClE,4DAAkD;AAClD,iDAAwC;AAOjC,IAAM,UAAU,GAAhB,MAAM,UAAU;CA2BtB,CAAA;AA1BC;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;IAC3B,IAAA,gCAAsB,GAAE;;sCACd;AAEX;IAAC,IAAA,eAAK,GAAE;IACP,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;8BACjB,IAAI;6CAAC;AAEhB;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;IAC/B,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;;yCAC7B;AAEd;IAAC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,qBAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;;0CACzC;AAEf;IAAC,IAAA,mBAAS,EAAC,GAAG,EAAE,CAAC,wBAAO,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;;0CAC5C;AAEvB;IAAC,IAAA,mBAAS,EAAC,GAAG,EAAE,CAAC,iCAAW,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;8CACvC;AAE/B;IAAC,IAAA,0BAAgB,GAAE;8BACR,IAAI;6CAAC;AAEhB;IAAC,IAAA,0BAAgB,GAAE;8BACR,IAAI;6CAAC;AA1BL,UAAU;IALtB,IAAA,gBAAM,GAAE;IACR,IAAA,gBAAM,EAAC,mBAAmB,EAAE,CAAC,QAAQ,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;IAC/D,iDAAiD;IACjD,2GAA2G;;IAC1G,IAAA,eAAK,EAAC,8CAA8C,EAAE,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC;GACjE,UAAU,CA2BtB;AA3BY,gCAAU","names":[],"sources":["/home/user/climbox/packages/api/src/time-series/time-series.entity.ts"],"sourcesContent":["import { ApiProperty } from '@nestjs/swagger';\r\nimport {\r\n  Column,\r\n  CreateDateColumn,\r\n  Entity,\r\n  Index,\r\n  ManyToOne,\r\n  PrimaryGeneratedColumn,\r\n  Unique,\r\n  UpdateDateColumn,\r\n} from 'typeorm';\r\nimport { DataUploads } from '../data-uploads/data-uploads.entity';\r\nimport { Sources } from '../sites/sources.entity';\r\nimport { Metric } from './metrics.enum';\r\n\r\n@Entity()\r\n@Unique('no_duplicate_data', ['metric', 'source', 'timestamp'])\r\n// https://github.com/typeorm/typeorm/issues/3336\r\n// CREATE INDEX \"IDX_cb2f3e83c09f83e8ce007ffd6f\" ON \"time_series\" (\"metric\", \"source_id\", \"timestamp\" DESC)\r\n@Index('IDX_time_series_metric_source_timestamp_DESC', { synchronize: false })\r\nexport class TimeSeries {\r\n  @ApiProperty({ example: 1 })\r\n  @PrimaryGeneratedColumn()\r\n  id: number;\r\n\r\n  @Index()\r\n  @Column({ nullable: false })\r\n  timestamp: Date;\r\n\r\n  @ApiProperty({ example: 11.05 })\r\n  @Column({ type: 'float', nullable: false })\r\n  value: number;\r\n\r\n  @Column({ type: 'enum', enum: Metric, nullable: false })\r\n  metric: Metric;\r\n\r\n  @ManyToOne(() => Sources, { onDelete: 'CASCADE', nullable: false })\r\n  source: Sources | null;\r\n\r\n  @ManyToOne(() => DataUploads, { onDelete: 'CASCADE', nullable: true })\r\n  dataUpload: DataUploads | null;\r\n\r\n  @CreateDateColumn()\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n}\r\n"],"version":3}