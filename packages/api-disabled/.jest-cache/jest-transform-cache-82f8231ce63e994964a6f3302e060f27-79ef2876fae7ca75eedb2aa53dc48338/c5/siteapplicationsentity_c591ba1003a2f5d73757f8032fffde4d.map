{"file":"/home/user/climbox/packages/api/src/site-applications/site-applications.entity.ts","mappings":";;;;;;;;;;;;AAAA,qCAWiB;AACjB,6CAA8C;AAC9C,yDAAoD;AACpD,wDAA6C;AAC7C,wDAA6C;AAC7C,wCAAuC;AAGhC,IAAM,eAAe,GAArB,MAAM,eAAe;IAgD1B,IACI,KAAK;QACP,OAAO,IAAA,aAAM,EAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACzB,CAAC;IAED,IACI,OAAO;QACT,OAAO,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC;IACnC,CAAC;CACF,CAAA;AAxDC;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;IAC3B,IAAA,2BAAO,GAAE;IACT,IAAA,gCAAsB,GAAE;;2CACd;AAEX;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,qBAAqB,EAAE,CAAC;IAC/C,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;;2DACpB;AAElC;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,gBAAgB,EAAE,CAAC;IAC1C,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;;sDACzB;AAE7B;IAAC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC;;6DACZ;AAElC;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,uBAAuB,EAAE,CAAC;IACjD,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;;8DACjB;AAErC;IAAC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC;;uDAClB;AAE5B;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,cAAc,EAAE,CAAC;IACxC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;;oDAC3B;AAE3B;IAAC,IAAA,2BAAO,GAAE;IACT,IAAA,gBAAM,EAAC,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;IACxB,IAAA,mBAAS,EAAC,MAAM,CAAC;;4CACN;AAEZ;IAAC,IAAA,0BAAgB,GAAE;8BACR,IAAI;kDAAC;AAEhB;IAAC,IAAA,0BAAgB,GAAE;8BACR,IAAI;kDAAC;AAEhB;IAAC,IAAA,kBAAQ,EAAC,GAAG,EAAE,CAAC,mBAAI,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC;IAC7C,IAAA,oBAAU,GAAE;IACZ,IAAA,eAAK,GAAE;8BACF,mBAAI;6CAAC;AAEX;IAAC,IAAA,mBAAS,EAAC,GAAG,EAAE,CAAC,mBAAI,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC;IAC9C,IAAA,eAAK,GAAE;8BACF,mBAAI;6CAAC;AAEX;IAAC,IAAA,0BAAM,GAAE;;;4CAGR;AAED;IAAC,IAAA,0BAAM,GAAE;;;8CAGR;AAxDU,eAAe;IAD3B,IAAA,gBAAM,GAAE;GACI,eAAe,CAyD3B;AAzDY,0CAAe","names":[],"sources":["/home/user/climbox/packages/api/src/site-applications/site-applications.entity.ts"],"sourcesContent":["import {\r\n  Entity,\r\n  PrimaryGeneratedColumn,\r\n  Column,\r\n  ManyToOne,\r\n  CreateDateColumn,\r\n  UpdateDateColumn,\r\n  OneToOne,\r\n  JoinColumn,\r\n  Index,\r\n  Generated,\r\n} from 'typeorm';\r\nimport { ApiProperty } from '@nestjs/swagger';\r\nimport { Exclude, Expose } from 'class-transformer';\r\nimport { Site } from '../sites/sites.entity';\r\nimport { User } from '../users/users.entity';\r\nimport { hashId } from '../utils/urls';\r\n\r\n@Entity()\r\nexport class SiteApplication {\r\n  @ApiProperty({ example: 1 })\r\n  @Exclude()\r\n  @PrimaryGeneratedColumn()\r\n  id: number;\r\n\r\n  @ApiProperty({ example: 'Permit Requirements' })\r\n  @Column({ nullable: true, type: 'character varying' })\r\n  permitRequirements: string | null;\r\n\r\n  @ApiProperty({ example: 'Funding Source' })\r\n  @Column({ nullable: true, type: 'character varying' })\r\n  fundingSource: string | null;\r\n\r\n  @Column({ nullable: true, type: 'timestamp' })\r\n  installationSchedule: Date | null;\r\n\r\n  @ApiProperty({ example: 'Installation Resource' })\r\n  @Column({ nullable: true, type: 'character varying' })\r\n  installationResources: string | null;\r\n\r\n  @Column({ nullable: true, type: 'timestamp' })\r\n  targetShipdate: Date | null;\r\n\r\n  @ApiProperty({ example: 'Tracking URL' })\r\n  @Column({ nullable: true, type: 'character varying' })\r\n  trackingUrl: string | null;\r\n\r\n  @Exclude()\r\n  @Column({ unique: true })\r\n  @Generated('uuid')\r\n  uid: string;\r\n\r\n  @CreateDateColumn()\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n\r\n  @OneToOne(() => Site, { onDelete: 'CASCADE' })\r\n  @JoinColumn()\r\n  @Index()\r\n  site: Site;\r\n\r\n  @ManyToOne(() => User, { onDelete: 'CASCADE' })\r\n  @Index()\r\n  user: User;\r\n\r\n  @Expose()\r\n  get appId(): string {\r\n    return hashId(this.id);\r\n  }\r\n\r\n  @Expose()\r\n  get applied(): boolean {\r\n    return !!this.permitRequirements;\r\n  }\r\n}\r\n"],"version":3}