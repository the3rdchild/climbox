5efed50ee361748a2f802878a66e06f5
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.SiteApplication = void 0;
const typeorm_1 = require("typeorm");
const swagger_1 = require("@nestjs/swagger");
const class_transformer_1 = require("class-transformer");
const sites_entity_1 = require("../sites/sites.entity");
const users_entity_1 = require("../users/users.entity");
const urls_1 = require("../utils/urls");
let SiteApplication = class SiteApplication {
    get appId() {
        return (0, urls_1.hashId)(this.id);
    }
    get applied() {
        return !!this.permitRequirements;
    }
};
__decorate([
    (0, swagger_1.ApiProperty)({ example: 1 }),
    (0, class_transformer_1.Exclude)(),
    (0, typeorm_1.PrimaryGeneratedColumn)(),
    __metadata("design:type", Number)
], SiteApplication.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'Permit Requirements' }),
    (0, typeorm_1.Column)({ nullable: true, type: 'character varying' }),
    __metadata("design:type", Object)
], SiteApplication.prototype, "permitRequirements", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'Funding Source' }),
    (0, typeorm_1.Column)({ nullable: true, type: 'character varying' }),
    __metadata("design:type", Object)
], SiteApplication.prototype, "fundingSource", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true, type: 'timestamp' }),
    __metadata("design:type", Object)
], SiteApplication.prototype, "installationSchedule", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'Installation Resource' }),
    (0, typeorm_1.Column)({ nullable: true, type: 'character varying' }),
    __metadata("design:type", Object)
], SiteApplication.prototype, "installationResources", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true, type: 'timestamp' }),
    __metadata("design:type", Object)
], SiteApplication.prototype, "targetShipdate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'Tracking URL' }),
    (0, typeorm_1.Column)({ nullable: true, type: 'character varying' }),
    __metadata("design:type", Object)
], SiteApplication.prototype, "trackingUrl", void 0);
__decorate([
    (0, class_transformer_1.Exclude)(),
    (0, typeorm_1.Column)({ unique: true }),
    (0, typeorm_1.Generated)('uuid'),
    __metadata("design:type", String)
], SiteApplication.prototype, "uid", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", Date)
], SiteApplication.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", Date)
], SiteApplication.prototype, "updatedAt", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => sites_entity_1.Site, { onDelete: 'CASCADE' }),
    (0, typeorm_1.JoinColumn)(),
    (0, typeorm_1.Index)(),
    __metadata("design:type", sites_entity_1.Site)
], SiteApplication.prototype, "site", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => users_entity_1.User, { onDelete: 'CASCADE' }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", users_entity_1.User)
], SiteApplication.prototype, "user", void 0);
__decorate([
    (0, class_transformer_1.Expose)(),
    __metadata("design:type", String),
    __metadata("design:paramtypes", [])
], SiteApplication.prototype, "appId", null);
__decorate([
    (0, class_transformer_1.Expose)(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], SiteApplication.prototype, "applied", null);
SiteApplication = __decorate([
    (0, typeorm_1.Entity)()
], SiteApplication);
exports.SiteApplication = SiteApplication;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvdXNlci9jbGltYm94L3BhY2thZ2VzL2FwaS9zcmMvc2l0ZS1hcHBsaWNhdGlvbnMvc2l0ZS1hcHBsaWNhdGlvbnMuZW50aXR5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLHFDQVdpQjtBQUNqQiw2Q0FBOEM7QUFDOUMseURBQW9EO0FBQ3BELHdEQUE2QztBQUM3Qyx3REFBNkM7QUFDN0Msd0NBQXVDO0FBR2hDLElBQU0sZUFBZSxHQUFyQixNQUFNLGVBQWU7SUFnRDFCLElBQ0ksS0FBSztRQUNQLE9BQU8sSUFBQSxhQUFNLEVBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFFRCxJQUNJLE9BQU87UUFDVCxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUM7SUFDbkMsQ0FBQztDQUNGLENBQUE7QUF4REM7SUFBQyxJQUFBLHFCQUFXLEVBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDM0IsSUFBQSwyQkFBTyxHQUFFO0lBQ1QsSUFBQSxnQ0FBc0IsR0FBRTs7MkNBQ2Q7QUFFWDtJQUFDLElBQUEscUJBQVcsRUFBQyxFQUFFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxDQUFDO0lBQy9DLElBQUEsZ0JBQU0sRUFBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLG1CQUFtQixFQUFFLENBQUM7OzJEQUNwQjtBQUVsQztJQUFDLElBQUEscUJBQVcsRUFBQyxFQUFFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxDQUFDO0lBQzFDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLG1CQUFtQixFQUFFLENBQUM7O3NEQUN6QjtBQUU3QjtJQUFDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDOzs2REFDWjtBQUVsQztJQUFDLElBQUEscUJBQVcsRUFBQyxFQUFFLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxDQUFDO0lBQ2pELElBQUEsZ0JBQU0sRUFBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLG1CQUFtQixFQUFFLENBQUM7OzhEQUNqQjtBQUVyQztJQUFDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDOzt1REFDbEI7QUFFNUI7SUFBQyxJQUFBLHFCQUFXLEVBQUMsRUFBRSxPQUFPLEVBQUUsY0FBYyxFQUFFLENBQUM7SUFDeEMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsbUJBQW1CLEVBQUUsQ0FBQzs7b0RBQzNCO0FBRTNCO0lBQUMsSUFBQSwyQkFBTyxHQUFFO0lBQ1QsSUFBQSxnQkFBTSxFQUFDLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDO0lBQ3hCLElBQUEsbUJBQVMsRUFBQyxNQUFNLENBQUM7OzRDQUNOO0FBRVo7SUFBQyxJQUFBLDBCQUFnQixHQUFFOzhCQUNSLElBQUk7a0RBQUM7QUFFaEI7SUFBQyxJQUFBLDBCQUFnQixHQUFFOzhCQUNSLElBQUk7a0RBQUM7QUFFaEI7SUFBQyxJQUFBLGtCQUFRLEVBQUMsR0FBRyxFQUFFLENBQUMsbUJBQUksRUFBRSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsQ0FBQztJQUM3QyxJQUFBLG9CQUFVLEdBQUU7SUFDWixJQUFBLGVBQUssR0FBRTs4QkFDRixtQkFBSTs2Q0FBQztBQUVYO0lBQUMsSUFBQSxtQkFBUyxFQUFDLEdBQUcsRUFBRSxDQUFDLG1CQUFJLEVBQUUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLENBQUM7SUFDOUMsSUFBQSxlQUFLLEdBQUU7OEJBQ0YsbUJBQUk7NkNBQUM7QUFFWDtJQUFDLElBQUEsMEJBQU0sR0FBRTs7OzRDQUdSO0FBRUQ7SUFBQyxJQUFBLDBCQUFNLEdBQUU7Ozs4Q0FHUjtBQXhEVSxlQUFlO0lBRDNCLElBQUEsZ0JBQU0sR0FBRTtHQUNJLGVBQWUsQ0F5RDNCO0FBekRZLDBDQUFlIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3VzZXIvY2xpbWJveC9wYWNrYWdlcy9hcGkvc3JjL3NpdGUtYXBwbGljYXRpb25zL3NpdGUtYXBwbGljYXRpb25zLmVudGl0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIEVudGl0eSxcclxuICBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uLFxyXG4gIENvbHVtbixcclxuICBNYW55VG9PbmUsXHJcbiAgQ3JlYXRlRGF0ZUNvbHVtbixcclxuICBVcGRhdGVEYXRlQ29sdW1uLFxyXG4gIE9uZVRvT25lLFxyXG4gIEpvaW5Db2x1bW4sXHJcbiAgSW5kZXgsXHJcbiAgR2VuZXJhdGVkLFxyXG59IGZyb20gJ3R5cGVvcm0nO1xyXG5pbXBvcnQgeyBBcGlQcm9wZXJ0eSB9IGZyb20gJ0BuZXN0anMvc3dhZ2dlcic7XHJcbmltcG9ydCB7IEV4Y2x1ZGUsIEV4cG9zZSB9IGZyb20gJ2NsYXNzLXRyYW5zZm9ybWVyJztcclxuaW1wb3J0IHsgU2l0ZSB9IGZyb20gJy4uL3NpdGVzL3NpdGVzLmVudGl0eSc7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi91c2Vycy91c2Vycy5lbnRpdHknO1xyXG5pbXBvcnQgeyBoYXNoSWQgfSBmcm9tICcuLi91dGlscy91cmxzJztcclxuXHJcbkBFbnRpdHkoKVxyXG5leHBvcnQgY2xhc3MgU2l0ZUFwcGxpY2F0aW9uIHtcclxuICBAQXBpUHJvcGVydHkoeyBleGFtcGxlOiAxIH0pXHJcbiAgQEV4Y2x1ZGUoKVxyXG4gIEBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uKClcclxuICBpZDogbnVtYmVyO1xyXG5cclxuICBAQXBpUHJvcGVydHkoeyBleGFtcGxlOiAnUGVybWl0IFJlcXVpcmVtZW50cycgfSlcclxuICBAQ29sdW1uKHsgbnVsbGFibGU6IHRydWUsIHR5cGU6ICdjaGFyYWN0ZXIgdmFyeWluZycgfSlcclxuICBwZXJtaXRSZXF1aXJlbWVudHM6IHN0cmluZyB8IG51bGw7XHJcblxyXG4gIEBBcGlQcm9wZXJ0eSh7IGV4YW1wbGU6ICdGdW5kaW5nIFNvdXJjZScgfSlcclxuICBAQ29sdW1uKHsgbnVsbGFibGU6IHRydWUsIHR5cGU6ICdjaGFyYWN0ZXIgdmFyeWluZycgfSlcclxuICBmdW5kaW5nU291cmNlOiBzdHJpbmcgfCBudWxsO1xyXG5cclxuICBAQ29sdW1uKHsgbnVsbGFibGU6IHRydWUsIHR5cGU6ICd0aW1lc3RhbXAnIH0pXHJcbiAgaW5zdGFsbGF0aW9uU2NoZWR1bGU6IERhdGUgfCBudWxsO1xyXG5cclxuICBAQXBpUHJvcGVydHkoeyBleGFtcGxlOiAnSW5zdGFsbGF0aW9uIFJlc291cmNlJyB9KVxyXG4gIEBDb2x1bW4oeyBudWxsYWJsZTogdHJ1ZSwgdHlwZTogJ2NoYXJhY3RlciB2YXJ5aW5nJyB9KVxyXG4gIGluc3RhbGxhdGlvblJlc291cmNlczogc3RyaW5nIHwgbnVsbDtcclxuXHJcbiAgQENvbHVtbih7IG51bGxhYmxlOiB0cnVlLCB0eXBlOiAndGltZXN0YW1wJyB9KVxyXG4gIHRhcmdldFNoaXBkYXRlOiBEYXRlIHwgbnVsbDtcclxuXHJcbiAgQEFwaVByb3BlcnR5KHsgZXhhbXBsZTogJ1RyYWNraW5nIFVSTCcgfSlcclxuICBAQ29sdW1uKHsgbnVsbGFibGU6IHRydWUsIHR5cGU6ICdjaGFyYWN0ZXIgdmFyeWluZycgfSlcclxuICB0cmFja2luZ1VybDogc3RyaW5nIHwgbnVsbDtcclxuXHJcbiAgQEV4Y2x1ZGUoKVxyXG4gIEBDb2x1bW4oeyB1bmlxdWU6IHRydWUgfSlcclxuICBAR2VuZXJhdGVkKCd1dWlkJylcclxuICB1aWQ6IHN0cmluZztcclxuXHJcbiAgQENyZWF0ZURhdGVDb2x1bW4oKVxyXG4gIGNyZWF0ZWRBdDogRGF0ZTtcclxuXHJcbiAgQFVwZGF0ZURhdGVDb2x1bW4oKVxyXG4gIHVwZGF0ZWRBdDogRGF0ZTtcclxuXHJcbiAgQE9uZVRvT25lKCgpID0+IFNpdGUsIHsgb25EZWxldGU6ICdDQVNDQURFJyB9KVxyXG4gIEBKb2luQ29sdW1uKClcclxuICBASW5kZXgoKVxyXG4gIHNpdGU6IFNpdGU7XHJcblxyXG4gIEBNYW55VG9PbmUoKCkgPT4gVXNlciwgeyBvbkRlbGV0ZTogJ0NBU0NBREUnIH0pXHJcbiAgQEluZGV4KClcclxuICB1c2VyOiBVc2VyO1xyXG5cclxuICBARXhwb3NlKClcclxuICBnZXQgYXBwSWQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBoYXNoSWQodGhpcy5pZCk7XHJcbiAgfVxyXG5cclxuICBARXhwb3NlKClcclxuICBnZXQgYXBwbGllZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAhIXRoaXMucGVybWl0UmVxdWlyZW1lbnRzO1xyXG4gIH1cclxufVxyXG4iXSwidmVyc2lvbiI6M30=