{"file":"/home/user/climbox/packages/api/src/workers/dailyData.test.ts","mappings":";;;;;;;;;;;AAEA,2CAA2C;AAG3C,IAAI,CAAC,wCAAwC,EAAE,GAAS,EAAE;IACxD,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IAEvB,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC;IACpC,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;IAClC,MAAM,IAAI,GAAG;QACX,EAAE,EAAE,CAAC;QACL,IAAI,EAAE,IAAI;QACV,OAAO,EAAE;YACP,IAAI,EAAE,SAAS;YACf,WAAW,EAAE,CAAC,CAAC,aAAa,EAAE,YAAY,CAAC;SAC5C;QACD,QAAQ,EAAE,sBAAsB;QAChC,KAAK,EAAE,IAAI;QACX,cAAc,EAAE,EAAE;QAClB,MAAM,EAAE,CAAC;QACT,WAAW,EAAE,IAAI;QACjB,SAAS,EAAE,IAAI,IAAI,EAAE;QACrB,SAAS,EAAE,IAAI,IAAI,EAAE;QACrB,QAAQ,EAAE,YAAY;KACvB,CAAC;IAEF,MAAM,MAAM,GAAG,MAAM,IAAA,wBAAY,EAAC,IAAuB,EAAE,IAAI,CAAC,CAAC;IACjE,MAAM,QAAQ,GAA2B;QACvC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE;QACf,IAAI;QACJ,eAAe,EAAE,CAAC;QAClB,iBAAiB,EAAE,kBAAkB;QACrC,oBAAoB,EAAE,kBAAkB;KACzC,CAAC;IAEF,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;AACnC,CAAC,CAAA,CAAC,CAAC","names":[],"sources":["/home/user/climbox/packages/api/src/workers/dailyData.test.ts"],"sourcesContent":["import { DailyData } from 'sites/daily-data.entity';\r\nimport { DeepPartial } from 'typeorm';\r\nimport { getDailyData } from './dailyData';\r\nimport { Site } from '../sites/sites.entity';\r\n\r\ntest('It processes Sofar API for daily data.', async () => {\r\n  jest.setTimeout(60000);\r\n\r\n  const date = new Date('2024-08-31');\r\n  date.setUTCHours(23, 59, 59, 999);\r\n  const site = {\r\n    id: 1,\r\n    name: null,\r\n    polygon: {\r\n      type: 'Polygon',\r\n      coordinates: [-122.699036598, 37.893756314],\r\n    },\r\n    sensorId: 'SPOT-300434063450120',\r\n    depth: null,\r\n    maxMonthlyMean: 22,\r\n    status: 0,\r\n    videoStream: null,\r\n    createdAt: new Date(),\r\n    updatedAt: new Date(),\r\n    timezone: 'Etc/GMT+12',\r\n  };\r\n\r\n  const values = await getDailyData(site as unknown as Site, date);\r\n  const expected: DeepPartial<DailyData> = {\r\n    site: { id: 1 },\r\n    date,\r\n    dailyAlertLevel: 0,\r\n    degreeHeatingDays: 15.397786264922775,\r\n    satelliteTemperature: 15.419691827607394,\r\n  };\r\n\r\n  expect(values).toEqual(expected);\r\n});\r\n"],"version":3}