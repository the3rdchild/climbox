{"file":"/home/user/climbox/packages/api/src/users/users.entity.ts","mappings":";;;;;;;;;;;;AACA,qCASiB;AACjB,6CAIyB;AACzB,yDAA4C;AAC5C,wDAA6C;AAC7C,2DAA0D;AAE1D,IAAY,UAIX;AAJD,WAAY,UAAU;IACpB,iCAAmB,CAAA;IACnB,0CAA4B,CAAA;IAC5B,wCAA0B,CAAA;AAC5B,CAAC,EAJW,UAAU,GAAV,kBAAU,KAAV,kBAAU,QAIrB;AAGM,IAAM,IAAI,GAAV,MAAM,IAAI;CA+DhB,CAAA;AA9DC;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;IAC3B,IAAA,gCAAsB,GAAE;;gCACd;AAEX;IAAC,IAAA,yBAAe,GAAE;IACjB,IAAA,2BAAO,GAAE;IACT,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,mBAAmB,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;;yCACzC;AAE5B;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC;IACrC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;;sCAC7B;AAEzB;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,sBAAsB,EAAE,CAAC;IAChD,IAAA,gBAAM,GAAE;IACR,IAAA,eAAK,EAAC,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;;mCACV;AAEd;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,qBAAqB,EAAE,CAAC;IAC/C,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;;0CAC1B;AAE5B;IAAC,IAAA,iCAAgB,GAAE;IAClB,IAAA,gBAAM,EAAC;QACN,IAAI,EAAE,UAAU;QAChB,kBAAkB,EAAE,OAAO;QAC3B,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,IAAI;KACX,CAAC;IACD,IAAA,eAAK,EAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;;sCACA;AAEzB;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,cAAc,EAAE,CAAC;IACxC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;;qCAC/B;AAEvB;IAAC,IAAA,gBAAM,EAAC;QACN,IAAI,EAAE,MAAM;QACZ,IAAI,EAAE,UAAU;QAChB,OAAO,EAAE,UAAU,CAAC,OAAO;QAC3B,QAAQ,EAAE,KAAK;KAChB,CAAC;;wCACqB;AAEvB;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,kBAAkB,EAAE,CAAC;IAC5C,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;;yCAC3B;AAE3B;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,4BAA4B,EAAE,CAAC;IACtD,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;;sCAC9B;AAExB;IAAC,IAAA,6BAAmB,GAAE;IACrB,IAAA,oBAAU,EAAC,GAAG,EAAE,CAAC,mBAAI,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;IAChE,IAAA,mBAAS,GAAE;;+CACc;AAE1B;IAAC,IAAA,0BAAgB,GAAE;8BACR,IAAI;uCAAC;AAEhB;IAAC,IAAA,0BAAgB,GAAE;8BACR,IAAI;uCAAC;AA9DL,IAAI;IADhB,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;GACb,IAAI,CA+DhB;AA/DY,oBAAI","names":[],"sources":["/home/user/climbox/packages/api/src/users/users.entity.ts"],"sourcesContent":["import { GeoJSON } from 'geojson';\r\nimport {\r\n  Entity,\r\n  PrimaryGeneratedColumn,\r\n  Column,\r\n  Index,\r\n  CreateDateColumn,\r\n  UpdateDateColumn,\r\n  ManyToMany,\r\n  JoinTable,\r\n} from 'typeorm';\r\nimport {\r\n  ApiHideProperty,\r\n  ApiProperty,\r\n  ApiPropertyOptional,\r\n} from '@nestjs/swagger';\r\nimport { Exclude } from 'class-transformer';\r\nimport { Site } from '../sites/sites.entity';\r\nimport { ApiPointProperty } from '../docs/api-properties';\r\n\r\nexport enum AdminLevel {\r\n  Default = 'default',\r\n  SiteManager = 'site_manager',\r\n  SuperAdmin = 'super_admin',\r\n}\r\n\r\n@Entity({ name: 'users' })\r\nexport class User {\r\n  @ApiProperty({ example: 1 })\r\n  @PrimaryGeneratedColumn()\r\n  id: number;\r\n\r\n  @ApiHideProperty()\r\n  @Exclude()\r\n  @Column({ nullable: true, type: 'character varying', select: false })\r\n  firebaseUid?: string | null;\r\n\r\n  @ApiProperty({ example: 'Full Name' })\r\n  @Column({ nullable: true, type: 'character varying' })\r\n  fullName?: string | null;\r\n\r\n  @ApiProperty({ example: 'fullname@example.com' })\r\n  @Column()\r\n  @Index({ unique: true })\r\n  email: string;\r\n\r\n  @ApiProperty({ example: 'Random organization' })\r\n  @Column({ nullable: true, type: 'character varying' })\r\n  organization: string | null;\r\n\r\n  @ApiPointProperty()\r\n  @Column({\r\n    type: 'geometry',\r\n    spatialFeatureType: 'Point',\r\n    nullable: true,\r\n    srid: 4326,\r\n  })\r\n  @Index({ spatial: true })\r\n  location: GeoJSON | null;\r\n\r\n  @ApiProperty({ example: 'Some country' })\r\n  @Column({ nullable: true, type: 'character varying' })\r\n  country: string | null;\r\n\r\n  @Column({\r\n    type: 'enum',\r\n    enum: AdminLevel,\r\n    default: AdminLevel.Default,\r\n    nullable: false,\r\n  })\r\n  adminLevel: AdminLevel;\r\n\r\n  @ApiProperty({ example: 'Some description' })\r\n  @Column({ nullable: true, type: 'character varying' })\r\n  description: string | null;\r\n\r\n  @ApiProperty({ example: 'http://some-sample-url.com' })\r\n  @Column({ nullable: true, type: 'character varying' })\r\n  imageUrl: string | null;\r\n\r\n  @ApiPropertyOptional()\r\n  @ManyToMany(() => Site, (site) => site.admins, { cascade: true })\r\n  @JoinTable()\r\n  administeredSites: Site[];\r\n\r\n  @CreateDateColumn()\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n}\r\n"],"version":3}