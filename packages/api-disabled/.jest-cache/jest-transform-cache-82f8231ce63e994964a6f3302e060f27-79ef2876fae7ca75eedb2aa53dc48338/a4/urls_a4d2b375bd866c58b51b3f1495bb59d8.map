{"version":3,"names":["cov_2blsdb84m8","actualCoverage","s","Hashids","require","hasher","b","process","env","URL_SALT","APP_SECRET","hashId","id","f","encode","exports","idFromHash","hash","decode","isValidId","match","getYouTubeVideoId","url","isPlaylist","split","urlParts","_a","length","undefined","replace"],"sources":["/home/user/climbox/packages/api/src/utils/urls.ts"],"sourcesContent":["// Use require because of TS issues...\r\n// https://github.com/niieani/hashids.js/issues/210\r\nconst Hashids = require('hashids/cjs');\r\n\r\nconst hasher = new Hashids(process.env.URL_SALT || process.env.APP_SECRET, 10);\r\n\r\nexport const hashId = (id: number) => hasher.encode(id);\r\nexport const idFromHash = (hash: string) => hasher.decode(hash)[0];\r\n// Check to see if an id is valid - basically it must be an integer string with no extra characters\r\nexport const isValidId = (id: string) => id.match(/^[0-9]+$/);\r\n\r\n// Get YouTube ID from various YouTube URL\r\n// Same as function `getYouTubeVideoId` in `packages/website/src/helpers/video.ts`\r\n// Works for the following url format:\r\n// - https://www.youtube.com/embed/videoID/?someArgs\r\nexport const getYouTubeVideoId = (url: string, isPlaylist: boolean) => {\r\n  if (isPlaylist) {\r\n    return url.split('=')[1];\r\n  }\r\n\r\n  const urlParts = url?.split('?')[0]?.split('/embed/');\r\n\r\n  // For an expected video url format we expect the url to be split in 2 parts\r\n  // E.g. [\"https://www.youtube.com\", \"videoID/\"]\r\n  if (urlParts.length !== 2) {\r\n    return undefined;\r\n  }\r\n\r\n  // Remove any trailing forward slash '/'\r\n  return urlParts[1].replace('/', '');\r\n};\r\n"],"mappings":"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"}