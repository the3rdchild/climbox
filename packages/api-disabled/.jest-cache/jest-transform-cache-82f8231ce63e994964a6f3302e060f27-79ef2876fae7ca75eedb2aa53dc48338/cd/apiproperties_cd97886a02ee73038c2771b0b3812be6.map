{"file":"/home/user/climbox/packages/api/src/docs/api-properties.ts","mappings":";;;AAAA,2CAAiD;AACjD,6CAKyB;AACzB,sGAAgG;AAChG,gHAAyG;AACzG,kEAGsC;AACtC,+CAA4C;AAErC,MAAM,gBAAgB,GAAG,GAAG,EAAE;IACnC,OAAO,IAAA,wBAAe,EAAC,IAAA,qBAAW,EAAC,yBAAW,CAAC,CAAC,CAAC;AACnD,CAAC,CAAC;AAFW,QAAA,gBAAgB,oBAE3B;AAEK,MAAM,aAAa,GAAG,GAAG,EAAE;IAChC,MAAM,aAAa,GAAG,OAAO,CAAC,GAAG,CAAC,wBAAwB;QACxD,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,EAAE,CAAC;QACpD,CAAC,CAAC,CAAC,CAAC;IAEN,OAAO,IAAA,wBAAe,EACpB,IAAA,qBAAW,EAAC,qBAAqB,CAAC,EAClC,IAAA,iBAAO,EAAC;QACN,MAAM,EAAE;YACN,IAAI,EAAE,QAAQ;YACd,UAAU,EAAE;gBACV,IAAI,EAAE;oBACJ,WAAW,EAAE,sEAAsE,aAAa,IAAI;oBACpG,IAAI,EAAE,QAAQ;oBACd,MAAM,EAAE,QAAQ;iBACjB;aACF;SACF;KACF,CAAC,CACH,CAAC;AACJ,CAAC,CAAC;AApBW,QAAA,aAAa,iBAoBxB;AAEK,MAAM,4BAA4B,GAAG,GAAG,EAAE;IAC/C,OAAO,IAAA,wBAAe,EACpB,IAAA,iBAAO,EAAC;QACN,MAAM,EAAE;YACN,IAAI,EAAE,QAAQ;YACd,UAAU,EAAE;gBACV,IAAI,EAAE;oBACJ,IAAI,EAAE,IAAA,uBAAa,EAAC,+DAA4B,CAAC;iBAClD;gBACD,eAAe,EAAE;oBACf,IAAI,EAAE,IAAA,uBAAa,EAAC,sDAAwB,CAAC;iBAC9C;aACF;SACF;KACF,CAAC,CACH,CAAC;AACJ,CAAC,CAAC;AAhBW,QAAA,4BAA4B,gCAgBvC;AAEK,MAAM,iBAAiB,GAAG,GAAG,EAAE;IACpC,OAAO,IAAA,wBAAe,EACpB,IAAA,iBAAO,EAAC;QACN,MAAM,EAAE;YACN,IAAI,EAAE,QAAQ;YACd,UAAU,EAAE;gBACV,IAAI,EAAE;oBACJ,IAAI,EAAE,IAAA,uBAAa,EAAC,+BAAa,CAAC;iBACnC;gBACD,eAAe,EAAE;oBACf,IAAI,EAAE,IAAA,uBAAa,EAAC,0CAAwB,CAAC;iBAC9C;aACF;SACF;KACF,CAAC,CACH,CAAC;AACJ,CAAC,CAAC;AAhBW,QAAA,iBAAiB,qBAgB5B","names":[],"sources":["/home/user/climbox/packages/api/src/docs/api-properties.ts"],"sourcesContent":["import { applyDecorators } from '@nestjs/common';\r\nimport {\r\n  ApiBody,\r\n  ApiConsumes,\r\n  ApiProperty,\r\n  getSchemaPath,\r\n} from '@nestjs/swagger';\r\nimport { UpdateSiteApplicationDto } from '../site-applications/dto/update-site-application.dto';\r\nimport { UpdateSiteWithApplicationDto } from '../site-applications/dto/update-site-with-application.dto';\r\nimport {\r\n  CreateSiteApplicationDto,\r\n  CreateSiteDto,\r\n} from '../sites/dto/create-site.dto';\r\nimport { PointSchema } from './api-schemas';\r\n\r\nexport const ApiPointProperty = () => {\r\n  return applyDecorators(ApiProperty(PointSchema));\r\n};\r\n\r\nexport const ApiFileUpload = () => {\r\n  const maxFileSizeMB = process.env.STORAGE_MAX_FILE_SIZE_MB\r\n    ? parseInt(process.env.STORAGE_MAX_FILE_SIZE_MB, 10)\r\n    : 1;\r\n\r\n  return applyDecorators(\r\n    ApiConsumes('multipart/form-data'),\r\n    ApiBody({\r\n      schema: {\r\n        type: 'object',\r\n        properties: {\r\n          file: {\r\n            description: `The image to upload (image/jpeg, image/png, image/tiff). Max size: ${maxFileSizeMB}MB`,\r\n            type: 'string',\r\n            format: 'binary',\r\n          },\r\n        },\r\n      },\r\n    }),\r\n  );\r\n};\r\n\r\nexport const ApiUpdateSiteApplicationBody = () => {\r\n  return applyDecorators(\r\n    ApiBody({\r\n      schema: {\r\n        type: 'object',\r\n        properties: {\r\n          site: {\r\n            $ref: getSchemaPath(UpdateSiteWithApplicationDto),\r\n          },\r\n          siteApplication: {\r\n            $ref: getSchemaPath(UpdateSiteApplicationDto),\r\n          },\r\n        },\r\n      },\r\n    }),\r\n  );\r\n};\r\n\r\nexport const ApiCreateSiteBody = () => {\r\n  return applyDecorators(\r\n    ApiBody({\r\n      schema: {\r\n        type: 'object',\r\n        properties: {\r\n          site: {\r\n            $ref: getSchemaPath(CreateSiteDto),\r\n          },\r\n          siteApplication: {\r\n            $ref: getSchemaPath(CreateSiteApplicationDto),\r\n          },\r\n        },\r\n      },\r\n    }),\r\n  );\r\n};\r\n"],"version":3}