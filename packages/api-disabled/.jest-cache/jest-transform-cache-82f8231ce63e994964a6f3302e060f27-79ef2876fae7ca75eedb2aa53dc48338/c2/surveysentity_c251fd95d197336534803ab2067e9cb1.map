{"file":"/home/user/climbox/packages/api/src/surveys/surveys.entity.ts","mappings":";;;;;;;;;;;;AAAA,qCAYiB;AACjB,6CAA8C;AAC9C,wDAA6C;AAC7C,wDAA6C;AAG7C,+DAAkE;AAClE,oEAA+D;AAC/D,6DAA2D;AAE3D,IAAY,iBAKX;AALD,WAAY,iBAAiB;IAC3B,kCAAa,CAAA;IACb,mCAAc,CAAA;IACd,qCAAgB,CAAA;IAChB,uCAAkB,CAAA;AACpB,CAAC,EALW,iBAAiB,GAAjB,yBAAiB,KAAjB,yBAAiB,QAK5B;AAGM,IAAM,MAAM,GAAZ,MAAM,MAAM;CA4DlB,CAAA;AA3DC;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;IAC3B,IAAA,gCAAsB,GAAE;;kCACd;AAEX;IAAC,IAAA,gBAAM,EAAC;QACN,IAAI,EAAE,oBAAoB;QAC1B,IAAI,EAAE,MAAM;QACZ,IAAI,EAAE,iBAAiB;QACvB,OAAO,EAAE,SAAS;QAClB,QAAQ,EAAE,KAAK;KAChB,CAAC;;iDACmC;AAErC;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;IAC9B,IAAA,gBAAM,EAAC,OAAO,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;2CACR;AAE5B;IAAC,IAAA,qBAAW,EAAC,EAAE,OAAO,EAAE,gBAAgB,EAAE,CAAC;IAC1C,IAAA,gBAAM,EAAC,MAAM,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;wCACV;AAEzB;IAAC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;8BAClB,IAAI;wCAAC;AAEf;IAAC,IAAA,mBAAS,EAAC,GAAG,EAAE,CAAC,mBAAI,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;IAC/D,IAAA,oBAAU,EAAC,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;IAC/B,IAAA,eAAK,GAAE;8BACF,mBAAI;oCAAC;AAEX;IAAC,IAAA,oBAAU,EAAC,CAAC,MAAc,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC;;sCAC7B;AAEf;IAAC,IAAA,mBAAS,EAAC,GAAG,EAAE,CAAC,mBAAI,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;IAC/D,IAAA,oBAAU,EAAC,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;IAC/B,IAAA,eAAK,GAAE;8BACF,mBAAI;oCAAC;AAEX;IAAC,IAAA,0BAAgB,GAAE;8BACR,IAAI;yCAAC;AAEhB;IAAC,IAAA,0BAAgB,GAAE;8BACR,IAAI;yCAAC;AAEhB;IAAC,IAAA,kBAAQ,EAAC,GAAG,EAAE,CAAC,iCAAW,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC;8BAC7C,iCAAW;mDAAC;AAElC;IAAC,IAAA,mBAAS,EAAC,GAAG,EAAE,CAAC,iCAAW,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC;;2CACxC;AAU5B;IAAC,IAAA,qBAAW,EAAC,kCAAgB,CAAC;8BACjB,+BAAa;0CAAC;AA3DhB,MAAM;IADlB,IAAA,gBAAM,GAAE;GACI,MAAM,CA4DlB;AA5DY,wBAAM","names":[],"sources":["/home/user/climbox/packages/api/src/surveys/surveys.entity.ts"],"sourcesContent":["import {\r\n  Entity,\r\n  PrimaryGeneratedColumn,\r\n  Column,\r\n  ManyToOne,\r\n  JoinColumn,\r\n  CreateDateColumn,\r\n  UpdateDateColumn,\r\n  OneToOne,\r\n  OneToMany,\r\n  RelationId,\r\n  Index,\r\n} from 'typeorm';\r\nimport { ApiProperty } from '@nestjs/swagger';\r\nimport { Site } from '../sites/sites.entity';\r\nimport { User } from '../users/users.entity';\r\nimport { DailyData } from '../sites/daily-data.entity';\r\nimport { SiteSurveyPoint } from '../site-survey-points/site-survey-points.entity';\r\nimport { Observations, SurveyMedia } from './survey-media.entity';\r\nimport { SensorDataDto } from '../sensors/dto/sensor-data.dto';\r\nimport { sensorDataSchema } from '../docs/api-sensor-data';\r\n\r\nexport enum WeatherConditions {\r\n  Calm = 'calm',\r\n  Wavy = 'waves',\r\n  Stormy = 'storm',\r\n  NoData = 'no-data',\r\n}\r\n\r\n@Entity()\r\nexport class Survey {\r\n  @ApiProperty({ example: 1 })\r\n  @PrimaryGeneratedColumn()\r\n  id: number;\r\n\r\n  @Column({\r\n    name: 'weather_conditions',\r\n    type: 'enum',\r\n    enum: WeatherConditions,\r\n    default: 'no-data',\r\n    nullable: false,\r\n  })\r\n  weatherConditions: WeatherConditions;\r\n\r\n  @ApiProperty({ example: 33.2 })\r\n  @Column('float', { nullable: true })\r\n  temperature?: number | null;\r\n\r\n  @ApiProperty({ example: 'Survey comment' })\r\n  @Column('text', { nullable: true })\r\n  comments?: string | null;\r\n\r\n  @Column({ nullable: false })\r\n  diveDate: Date;\r\n\r\n  @ManyToOne(() => User, { onDelete: 'CASCADE', nullable: false })\r\n  @JoinColumn({ name: 'user_id' })\r\n  @Index()\r\n  user: User;\r\n\r\n  @RelationId((survey: Survey) => survey.site)\r\n  siteId: number;\r\n\r\n  @ManyToOne(() => Site, { onDelete: 'CASCADE', nullable: false })\r\n  @JoinColumn({ name: 'site_id' })\r\n  @Index()\r\n  site: Site;\r\n\r\n  @CreateDateColumn()\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n\r\n  @OneToOne(() => SurveyMedia, (surveyMedia) => surveyMedia.surveyId)\r\n  featuredSurveyMedia?: SurveyMedia;\r\n\r\n  @OneToMany(() => SurveyMedia, (surveyMedia) => surveyMedia.surveyId)\r\n  surveyMedia?: SurveyMedia[];\r\n\r\n  latestDailyData?: DailyData;\r\n\r\n  surveyPoints?: SiteSurveyPoint[];\r\n\r\n  observations?: Observations[];\r\n\r\n  satelliteTemperature?: number;\r\n\r\n  @ApiProperty(sensorDataSchema)\r\n  sensorData?: SensorDataDto;\r\n}\r\n"],"version":3}