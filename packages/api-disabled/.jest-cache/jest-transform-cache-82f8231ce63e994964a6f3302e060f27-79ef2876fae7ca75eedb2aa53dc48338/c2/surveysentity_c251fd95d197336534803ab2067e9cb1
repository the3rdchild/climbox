4551ffd36a2f3715d270173d073ad1a3
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Survey = exports.WeatherConditions = void 0;
const typeorm_1 = require("typeorm");
const swagger_1 = require("@nestjs/swagger");
const sites_entity_1 = require("../sites/sites.entity");
const users_entity_1 = require("../users/users.entity");
const survey_media_entity_1 = require("./survey-media.entity");
const sensor_data_dto_1 = require("../sensors/dto/sensor-data.dto");
const api_sensor_data_1 = require("../docs/api-sensor-data");
var WeatherConditions;
(function (WeatherConditions) {
    WeatherConditions["Calm"] = "calm";
    WeatherConditions["Wavy"] = "waves";
    WeatherConditions["Stormy"] = "storm";
    WeatherConditions["NoData"] = "no-data";
})(WeatherConditions = exports.WeatherConditions || (exports.WeatherConditions = {}));
let Survey = class Survey {
};
__decorate([
    (0, swagger_1.ApiProperty)({ example: 1 }),
    (0, typeorm_1.PrimaryGeneratedColumn)(),
    __metadata("design:type", Number)
], Survey.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({
        name: 'weather_conditions',
        type: 'enum',
        enum: WeatherConditions,
        default: 'no-data',
        nullable: false,
    }),
    __metadata("design:type", String)
], Survey.prototype, "weatherConditions", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 33.2 }),
    (0, typeorm_1.Column)('float', { nullable: true }),
    __metadata("design:type", Object)
], Survey.prototype, "temperature", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'Survey comment' }),
    (0, typeorm_1.Column)('text', { nullable: true }),
    __metadata("design:type", Object)
], Survey.prototype, "comments", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: false }),
    __metadata("design:type", Date)
], Survey.prototype, "diveDate", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => users_entity_1.User, { onDelete: 'CASCADE', nullable: false }),
    (0, typeorm_1.JoinColumn)({ name: 'user_id' }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", users_entity_1.User)
], Survey.prototype, "user", void 0);
__decorate([
    (0, typeorm_1.RelationId)((survey) => survey.site),
    __metadata("design:type", Number)
], Survey.prototype, "siteId", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => sites_entity_1.Site, { onDelete: 'CASCADE', nullable: false }),
    (0, typeorm_1.JoinColumn)({ name: 'site_id' }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", sites_entity_1.Site)
], Survey.prototype, "site", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", Date)
], Survey.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", Date)
], Survey.prototype, "updatedAt", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => survey_media_entity_1.SurveyMedia, (surveyMedia) => surveyMedia.surveyId),
    __metadata("design:type", survey_media_entity_1.SurveyMedia)
], Survey.prototype, "featuredSurveyMedia", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => survey_media_entity_1.SurveyMedia, (surveyMedia) => surveyMedia.surveyId),
    __metadata("design:type", Array)
], Survey.prototype, "surveyMedia", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(api_sensor_data_1.sensorDataSchema),
    __metadata("design:type", sensor_data_dto_1.SensorDataDto)
], Survey.prototype, "sensorData", void 0);
Survey = __decorate([
    (0, typeorm_1.Entity)()
], Survey);
exports.Survey = Survey;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvdXNlci9jbGltYm94L3BhY2thZ2VzL2FwaS9zcmMvc3VydmV5cy9zdXJ2ZXlzLmVudGl0eS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSxxQ0FZaUI7QUFDakIsNkNBQThDO0FBQzlDLHdEQUE2QztBQUM3Qyx3REFBNkM7QUFHN0MsK0RBQWtFO0FBQ2xFLG9FQUErRDtBQUMvRCw2REFBMkQ7QUFFM0QsSUFBWSxpQkFLWDtBQUxELFdBQVksaUJBQWlCO0lBQzNCLGtDQUFhLENBQUE7SUFDYixtQ0FBYyxDQUFBO0lBQ2QscUNBQWdCLENBQUE7SUFDaEIsdUNBQWtCLENBQUE7QUFDcEIsQ0FBQyxFQUxXLGlCQUFpQixHQUFqQix5QkFBaUIsS0FBakIseUJBQWlCLFFBSzVCO0FBR00sSUFBTSxNQUFNLEdBQVosTUFBTSxNQUFNO0NBNERsQixDQUFBO0FBM0RDO0lBQUMsSUFBQSxxQkFBVyxFQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDO0lBQzNCLElBQUEsZ0NBQXNCLEdBQUU7O2tDQUNkO0FBRVg7SUFBQyxJQUFBLGdCQUFNLEVBQUM7UUFDTixJQUFJLEVBQUUsb0JBQW9CO1FBQzFCLElBQUksRUFBRSxNQUFNO1FBQ1osSUFBSSxFQUFFLGlCQUFpQjtRQUN2QixPQUFPLEVBQUUsU0FBUztRQUNsQixRQUFRLEVBQUUsS0FBSztLQUNoQixDQUFDOztpREFDbUM7QUFFckM7SUFBQyxJQUFBLHFCQUFXLEVBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUM7SUFDOUIsSUFBQSxnQkFBTSxFQUFDLE9BQU8sRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQzs7MkNBQ1I7QUFFNUI7SUFBQyxJQUFBLHFCQUFXLEVBQUMsRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQztJQUMxQyxJQUFBLGdCQUFNLEVBQUMsTUFBTSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDOzt3Q0FDVjtBQUV6QjtJQUFDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsQ0FBQzs4QkFDbEIsSUFBSTt3Q0FBQztBQUVmO0lBQUMsSUFBQSxtQkFBUyxFQUFDLEdBQUcsRUFBRSxDQUFDLG1CQUFJLEVBQUUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsQ0FBQztJQUMvRCxJQUFBLG9CQUFVLEVBQUMsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLENBQUM7SUFDL0IsSUFBQSxlQUFLLEdBQUU7OEJBQ0YsbUJBQUk7b0NBQUM7QUFFWDtJQUFDLElBQUEsb0JBQVUsRUFBQyxDQUFDLE1BQWMsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQzs7c0NBQzdCO0FBRWY7SUFBQyxJQUFBLG1CQUFTLEVBQUMsR0FBRyxFQUFFLENBQUMsbUJBQUksRUFBRSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQy9ELElBQUEsb0JBQVUsRUFBQyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsQ0FBQztJQUMvQixJQUFBLGVBQUssR0FBRTs4QkFDRixtQkFBSTtvQ0FBQztBQUVYO0lBQUMsSUFBQSwwQkFBZ0IsR0FBRTs4QkFDUixJQUFJO3lDQUFDO0FBRWhCO0lBQUMsSUFBQSwwQkFBZ0IsR0FBRTs4QkFDUixJQUFJO3lDQUFDO0FBRWhCO0lBQUMsSUFBQSxrQkFBUSxFQUFDLEdBQUcsRUFBRSxDQUFDLGlDQUFXLEVBQUUsQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUM7OEJBQzdDLGlDQUFXO21EQUFDO0FBRWxDO0lBQUMsSUFBQSxtQkFBUyxFQUFDLEdBQUcsRUFBRSxDQUFDLGlDQUFXLEVBQUUsQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUM7OzJDQUN4QztBQVU1QjtJQUFDLElBQUEscUJBQVcsRUFBQyxrQ0FBZ0IsQ0FBQzs4QkFDakIsK0JBQWE7MENBQUM7QUEzRGhCLE1BQU07SUFEbEIsSUFBQSxnQkFBTSxHQUFFO0dBQ0ksTUFBTSxDQTREbEI7QUE1RFksd0JBQU0iLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvdXNlci9jbGltYm94L3BhY2thZ2VzL2FwaS9zcmMvc3VydmV5cy9zdXJ2ZXlzLmVudGl0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIEVudGl0eSxcclxuICBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uLFxyXG4gIENvbHVtbixcclxuICBNYW55VG9PbmUsXHJcbiAgSm9pbkNvbHVtbixcclxuICBDcmVhdGVEYXRlQ29sdW1uLFxyXG4gIFVwZGF0ZURhdGVDb2x1bW4sXHJcbiAgT25lVG9PbmUsXHJcbiAgT25lVG9NYW55LFxyXG4gIFJlbGF0aW9uSWQsXHJcbiAgSW5kZXgsXHJcbn0gZnJvbSAndHlwZW9ybSc7XHJcbmltcG9ydCB7IEFwaVByb3BlcnR5IH0gZnJvbSAnQG5lc3Rqcy9zd2FnZ2VyJztcclxuaW1wb3J0IHsgU2l0ZSB9IGZyb20gJy4uL3NpdGVzL3NpdGVzLmVudGl0eSc7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi91c2Vycy91c2Vycy5lbnRpdHknO1xyXG5pbXBvcnQgeyBEYWlseURhdGEgfSBmcm9tICcuLi9zaXRlcy9kYWlseS1kYXRhLmVudGl0eSc7XHJcbmltcG9ydCB7IFNpdGVTdXJ2ZXlQb2ludCB9IGZyb20gJy4uL3NpdGUtc3VydmV5LXBvaW50cy9zaXRlLXN1cnZleS1wb2ludHMuZW50aXR5JztcclxuaW1wb3J0IHsgT2JzZXJ2YXRpb25zLCBTdXJ2ZXlNZWRpYSB9IGZyb20gJy4vc3VydmV5LW1lZGlhLmVudGl0eSc7XHJcbmltcG9ydCB7IFNlbnNvckRhdGFEdG8gfSBmcm9tICcuLi9zZW5zb3JzL2R0by9zZW5zb3ItZGF0YS5kdG8nO1xyXG5pbXBvcnQgeyBzZW5zb3JEYXRhU2NoZW1hIH0gZnJvbSAnLi4vZG9jcy9hcGktc2Vuc29yLWRhdGEnO1xyXG5cclxuZXhwb3J0IGVudW0gV2VhdGhlckNvbmRpdGlvbnMge1xyXG4gIENhbG0gPSAnY2FsbScsXHJcbiAgV2F2eSA9ICd3YXZlcycsXHJcbiAgU3Rvcm15ID0gJ3N0b3JtJyxcclxuICBOb0RhdGEgPSAnbm8tZGF0YScsXHJcbn1cclxuXHJcbkBFbnRpdHkoKVxyXG5leHBvcnQgY2xhc3MgU3VydmV5IHtcclxuICBAQXBpUHJvcGVydHkoeyBleGFtcGxlOiAxIH0pXHJcbiAgQFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4oKVxyXG4gIGlkOiBudW1iZXI7XHJcblxyXG4gIEBDb2x1bW4oe1xyXG4gICAgbmFtZTogJ3dlYXRoZXJfY29uZGl0aW9ucycsXHJcbiAgICB0eXBlOiAnZW51bScsXHJcbiAgICBlbnVtOiBXZWF0aGVyQ29uZGl0aW9ucyxcclxuICAgIGRlZmF1bHQ6ICduby1kYXRhJyxcclxuICAgIG51bGxhYmxlOiBmYWxzZSxcclxuICB9KVxyXG4gIHdlYXRoZXJDb25kaXRpb25zOiBXZWF0aGVyQ29uZGl0aW9ucztcclxuXHJcbiAgQEFwaVByb3BlcnR5KHsgZXhhbXBsZTogMzMuMiB9KVxyXG4gIEBDb2x1bW4oJ2Zsb2F0JywgeyBudWxsYWJsZTogdHJ1ZSB9KVxyXG4gIHRlbXBlcmF0dXJlPzogbnVtYmVyIHwgbnVsbDtcclxuXHJcbiAgQEFwaVByb3BlcnR5KHsgZXhhbXBsZTogJ1N1cnZleSBjb21tZW50JyB9KVxyXG4gIEBDb2x1bW4oJ3RleHQnLCB7IG51bGxhYmxlOiB0cnVlIH0pXHJcbiAgY29tbWVudHM/OiBzdHJpbmcgfCBudWxsO1xyXG5cclxuICBAQ29sdW1uKHsgbnVsbGFibGU6IGZhbHNlIH0pXHJcbiAgZGl2ZURhdGU6IERhdGU7XHJcblxyXG4gIEBNYW55VG9PbmUoKCkgPT4gVXNlciwgeyBvbkRlbGV0ZTogJ0NBU0NBREUnLCBudWxsYWJsZTogZmFsc2UgfSlcclxuICBASm9pbkNvbHVtbih7IG5hbWU6ICd1c2VyX2lkJyB9KVxyXG4gIEBJbmRleCgpXHJcbiAgdXNlcjogVXNlcjtcclxuXHJcbiAgQFJlbGF0aW9uSWQoKHN1cnZleTogU3VydmV5KSA9PiBzdXJ2ZXkuc2l0ZSlcclxuICBzaXRlSWQ6IG51bWJlcjtcclxuXHJcbiAgQE1hbnlUb09uZSgoKSA9PiBTaXRlLCB7IG9uRGVsZXRlOiAnQ0FTQ0FERScsIG51bGxhYmxlOiBmYWxzZSB9KVxyXG4gIEBKb2luQ29sdW1uKHsgbmFtZTogJ3NpdGVfaWQnIH0pXHJcbiAgQEluZGV4KClcclxuICBzaXRlOiBTaXRlO1xyXG5cclxuICBAQ3JlYXRlRGF0ZUNvbHVtbigpXHJcbiAgY3JlYXRlZEF0OiBEYXRlO1xyXG5cclxuICBAVXBkYXRlRGF0ZUNvbHVtbigpXHJcbiAgdXBkYXRlZEF0OiBEYXRlO1xyXG5cclxuICBAT25lVG9PbmUoKCkgPT4gU3VydmV5TWVkaWEsIChzdXJ2ZXlNZWRpYSkgPT4gc3VydmV5TWVkaWEuc3VydmV5SWQpXHJcbiAgZmVhdHVyZWRTdXJ2ZXlNZWRpYT86IFN1cnZleU1lZGlhO1xyXG5cclxuICBAT25lVG9NYW55KCgpID0+IFN1cnZleU1lZGlhLCAoc3VydmV5TWVkaWEpID0+IHN1cnZleU1lZGlhLnN1cnZleUlkKVxyXG4gIHN1cnZleU1lZGlhPzogU3VydmV5TWVkaWFbXTtcclxuXHJcbiAgbGF0ZXN0RGFpbHlEYXRhPzogRGFpbHlEYXRhO1xyXG5cclxuICBzdXJ2ZXlQb2ludHM/OiBTaXRlU3VydmV5UG9pbnRbXTtcclxuXHJcbiAgb2JzZXJ2YXRpb25zPzogT2JzZXJ2YXRpb25zW107XHJcblxyXG4gIHNhdGVsbGl0ZVRlbXBlcmF0dXJlPzogbnVtYmVyO1xyXG5cclxuICBAQXBpUHJvcGVydHkoc2Vuc29yRGF0YVNjaGVtYSlcclxuICBzZW5zb3JEYXRhPzogU2Vuc29yRGF0YUR0bztcclxufVxyXG4iXSwidmVyc2lvbiI6M30=