{"file":"/home/user/climbox/packages/api/src/surveys/survey-media.entity.ts","mappings":"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","names":[],"sources":["/home/user/climbox/packages/api/src/surveys/survey-media.entity.ts"],"sourcesContent":["import {\r\n  Entity,\r\n  PrimaryGeneratedColumn,\r\n  Column,\r\n  ManyToOne,\r\n  JoinColumn,\r\n  CreateDateColumn,\r\n  UpdateDateColumn,\r\n  RelationId,\r\n  Index,\r\n} from 'typeorm';\r\nimport { ApiProperty } from '@nestjs/swagger';\r\nimport { Survey } from './surveys.entity';\r\nimport { SiteSurveyPoint } from '../site-survey-points/site-survey-points.entity';\r\nimport { SensorDataDto } from '../sensors/dto/sensor-data.dto';\r\nimport { sensorDataSchema } from '../docs/api-sensor-data';\r\n\r\nexport enum Observations {\r\n  Anthropogenic = 'anthropogenic',\r\n  Environmental = 'environmental',\r\n  EvidentDisease = 'evident-disease',\r\n  Healthy = 'healthy',\r\n  InvasiveSpecies = 'invasive-species',\r\n  Mortality = 'mortality',\r\n  NoData = 'no-data',\r\n  PossibleDisease = 'possible-disease',\r\n}\r\n\r\nexport enum MediaType {\r\n  Video = 'video',\r\n  Image = 'image',\r\n}\r\n\r\n@Entity()\r\nexport class SurveyMedia {\r\n  @ApiProperty({ example: 1 })\r\n  @PrimaryGeneratedColumn()\r\n  id: number;\r\n\r\n  @ApiProperty({\r\n    example:\r\n      'https://storage.googleapis.com/storage/reef-image-a5b5f5c5d5da5d5e.jpg',\r\n  })\r\n  @Column()\r\n  url: string;\r\n\r\n  @ApiProperty({\r\n    example:\r\n      'https://storage.googleapis.com/storage/thumbnail-reef-image-a5b5f5c5d5da5d5e.jpg',\r\n  })\r\n  @Column({\r\n    nullable: true,\r\n    type: 'character varying',\r\n  })\r\n  thumbnailUrl: string | null;\r\n\r\n  @ApiProperty({ example: 1 })\r\n  @Column({ default: 1 })\r\n  quality: number;\r\n\r\n  @Column()\r\n  featured: boolean;\r\n\r\n  @Column()\r\n  hidden: boolean;\r\n\r\n  @ApiProperty({ example: {} })\r\n  @Column('json')\r\n  metadata: string;\r\n\r\n  @Column({\r\n    type: 'enum',\r\n    enum: Observations,\r\n  })\r\n  observations: Observations;\r\n\r\n  @ApiProperty({ example: 'Survey media comments' })\r\n  @Column({ nullable: true, type: 'character varying' })\r\n  comments: string | null;\r\n\r\n  @ManyToOne(() => Survey, { onDelete: 'CASCADE', eager: true })\r\n  @JoinColumn({ name: 'survey_id' })\r\n  surveyId: Survey;\r\n\r\n  @Column({\r\n    type: 'enum',\r\n    enum: MediaType,\r\n  })\r\n  type: MediaType;\r\n\r\n  @RelationId((surveyMedia: SurveyMedia) => surveyMedia.surveyPoint)\r\n  surveyPointId: number;\r\n\r\n  @ManyToOne(() => SiteSurveyPoint, {\r\n    onDelete: 'SET NULL',\r\n    nullable: true,\r\n  })\r\n  @JoinColumn({ name: 'survey_point_id' })\r\n  @Index()\r\n  surveyPoint: SiteSurveyPoint | null;\r\n\r\n  @CreateDateColumn()\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n\r\n  @ApiProperty(sensorDataSchema)\r\n  sensorData?: SensorDataDto;\r\n}\r\n"],"version":3}